<!doctype html><html lang=ja-jp><head><meta name=generator content="Hugo 0.85.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>サイトの手入れでやったこと - 横あるき</title><meta name=description content="変なことを書き綴るサイトです。"><link rel=icon type=image/x-icon href=/favicon.ico><link rel=apple-touch-icon type=image/png sizes=152x152 href=/favicons/152x152.png><link rel=icon type=image/png sizes=192x192 href=/favicons/192x192.png><meta name=msapplication-config content="https://kuno.kdns.info/browserconfig.xml"><link rel=stylesheet href="/style.css?d=20210721084806"><meta property="og:title" content="サイトの手入れでやったこと"><meta property="og:description" content="このサイトを開設してから半年が経ちました。 ちょくちょくサイトの見た目を弄ったり、記事で動画の埋め込み等するたびにCSSの調整をしています。あ"><meta property="og:type" content="article"><meta property="og:url" content="https://kuno.kdns.info/2016/06/site-changelog/"><meta property="og:image" content="https://kuno.kdns.info/favicons/310x310.png"><meta property="article:published_time" content="2016-06-06T20:13:10+09:00"><meta property="article:modified_time" content="2016-06-06T20:13:10+09:00"><meta name=twitter:card content="summary"><meta name=twitter:image content="https://kuno.kdns.info/favicons/310x310.png"><meta name=twitter:title content="サイトの手入れでやったこと"><meta name=twitter:description content="このサイトを開設してから半年が経ちました。 ちょくちょくサイトの見た目を弄ったり、記事で動画の埋め込み等するたびにCSSの調整をしています。あ"><meta name=twitter:site content="@knokmki612"></head><body class=site-body><script src=https://unpkg.com/swup/dist/swup.min.js defer></script><script src=https://unpkg.com/@swup/scroll-plugin/dist/SwupScrollPlugin.min.js defer></script><script src=https://unpkg.com/@swup/preload-plugin/dist/SwupPreloadPlugin.min.js defer></script><script src=/index.js defer></script><header class=site-header><div class=inner><h1><a href=/>横あるき</a></h1><p>変なことを書き綴るサイトです。</p><p class=text-browser-message><a href=#main>本文に移動</a></p></div></header><nav class=site-global-menu><ul><li><a href=/about/>私について</a></li><li><a href=/product/>作ったもの</a></li></ul></nav><div class=site-search><form class=inner method=get action=https://duckduckgo.com><input class=search-input type=search name=q placeholder=DuckDuckGoで記事検索 aria-label=語句を入力して記事を検索>
<input type=hidden name=sites value=https://kuno.kdns.info/>
<button class=search-button type=submit>
<img src=/search.svg alt=検索></button></form></div><main id=swup class=site-main><hr id=main class=text-browser-message><article class=site-article><header class=article-header><h2>サイトの手入れでやったこと</h2><aside class=article-aside><div class=aside-row><div class=aside-column><span>公開日</span>
<time datetime=2016-06-06T20:13:10+09:00>2016/06/06</time></div></div><div class=aside-row><div class=aside-column><span>タグ</span>
<span><a href=/tags/%E6%97%A5%E8%A8%98/>日記</a>, <a href=/tags/%E3%81%8A%E7%9F%A5%E3%82%89%E3%81%9B/>お知らせ</a></span></div></div><div class=social-button><a class="button is-twitter" href="http://twitter.com/share?url=https%3a%2f%2fkuno.kdns.info%2f2016%2f06%2fsite-changelog%2f&text=%e3%82%b5%e3%82%a4%e3%83%88%e3%81%ae%e6%89%8b%e5%85%a5%e3%82%8c%e3%81%a7%e3%82%84%e3%81%a3%e3%81%9f%e3%81%93%e3%81%a8&nbsp;-&nbsp;%e6%a8%aa%e3%81%82%e3%82%8b%e3%81%8d" target=_blank rel="noopener noreferrer"><img src=/twitter.svg alt=Twitter>ツイート
</a><a class="button is-facebook" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fkuno.kdns.info%2f2016%2f06%2fsite-changelog%2f" target=_blank rel="noopener noreferrer"><img src=/facebook.svg alt=Facebook>シェア
</a><a class="button is-hatenabookmark" href=http://b.hatena.ne.jp/entry/https://kuno.kdns.info/2016/06/site-changelog/ target=_blank rel="noopener noreferrer"><img src=/hatenabookmark.svg alt=はてなブックマーク>ブックマーク</a></div></aside></header><p>このサイトを開設してから半年が経ちました。</p><p>ちょくちょくサイトの見た目を弄ったり、記事で動画の埋め込み等するたびにCSSの調整をしています。あと、多分パフォーマンスに影響がありそうなところもやっています。いつもTwitterで独り言のように変更したらつぶやいていますが、変化が分かりやすいところについて、gitの記録を遡りながら記事に記録しておこうかと思います。</p><h3 id=編集履歴ページを追加した>編集履歴ページを追加した</h3><figure class=article-image><a href=https://res.cloudinary.com/dj66cgnpk/image/upload/blog/%e3%82%b9%e3%82%af%e3%83%aa%e3%83%bc%e3%83%b3%e3%82%b7%e3%83%a7%e3%83%83%e3%83%88_2016-06-06_22-54-14.png><img src=https://res.cloudinary.com/dj66cgnpk/image/upload/t_blog_thumb/blog/%e3%82%b9%e3%82%af%e3%83%aa%e3%83%bc%e3%83%b3%e3%82%b7%e3%83%a7%e3%83%83%e3%83%88_2016-06-06_22-54-14.png alt></a><figcaption><p>編集履歴が見えるところ</p></figcaption></figure><p>11月29日に追加しました。これが何をやっているかというと<code>git log -p</code>の結果をそのまま流しています。あと、数日前に変更箇所に色がつくようにしてみました。</p><p>何故これをしようと思ったかというと、記事を黙って書き換えても誰にでも分かるようにしたかったからです。自分から「追記しました」と書くより良さそうかなと。</p><h3 id=記事一覧のリスト表示ができるようにした>記事一覧のリスト表示ができるようにした</h3><figure class=article-image><a href=https://res.cloudinary.com/dj66cgnpk/image/upload/blog/%e3%82%b9%e3%82%af%e3%83%aa%e3%83%bc%e3%83%b3%e3%82%b7%e3%83%a7%e3%83%83%e3%83%88_2016-06-06_22-55-09.png><img src=https://res.cloudinary.com/dj66cgnpk/image/upload/t_blog_thumb/blog/%e3%82%b9%e3%82%af%e3%83%aa%e3%83%bc%e3%83%b3%e3%82%b7%e3%83%a7%e3%83%83%e3%83%88_2016-06-06_22-55-09.png alt></a><figcaption><p>リスト表示しているところ</p></figcaption></figure><p>これは4月4日にやったようですね。記事の数がもっと増えないと意味がない気もしますが、通常は全文表示の記事3つ文が1ページであるところを、リスト表示では20記事くらい見ることが出来ます。記事を探すのには便利かも知れません。</p><h3 id=大画面時に右カラムの本文が中央に来るようにした>大画面時に右カラムの本文が中央に来るようにした</h3><figure class=article-image><a href=https://res.cloudinary.com/dj66cgnpk/image/upload/blog/%e3%82%b9%e3%82%af%e3%83%aa%e3%83%bc%e3%83%b3%e3%82%b7%e3%83%a7%e3%83%83%e3%83%88_2016-04-24_23-09-26.png><img src=https://res.cloudinary.com/dj66cgnpk/image/upload/t_blog_thumb/blog/%e3%82%b9%e3%82%af%e3%83%aa%e3%83%bc%e3%83%b3%e3%82%b7%e3%83%a7%e3%83%83%e3%83%88_2016-04-24_23-09-26.png alt></a><figcaption><p>右カラム修正前</p></figcaption></figure><figure class=article-image><a href=https://res.cloudinary.com/dj66cgnpk/image/upload/blog/%e3%82%b9%e3%82%af%e3%83%aa%e3%83%bc%e3%83%b3%e3%82%b7%e3%83%a7%e3%83%83%e3%83%88_2016-04-24_23-08-34.png><img src=https://res.cloudinary.com/dj66cgnpk/image/upload/t_blog_thumb/blog/%e3%82%b9%e3%82%af%e3%83%aa%e3%83%bc%e3%83%b3%e3%82%b7%e3%83%a7%e3%83%83%e3%83%88_2016-04-24_23-08-34.png alt></a><figcaption><p>右カラム修正後</p></figcaption></figure><p>これは見た目の話ですね。4月24日にやっているようです。見ての通り、私のサイトは2カラムのデザインを採用しています。ウィンドウに表示している分には満足していたのですが、大きなディスプレイのフルスクリーンで表示すると、どうにも気持ち悪さがあったんです。</p><p>どうしてかなあとずっと考えていたのですが、左カラムの固定幅であるぶん、本文の位置が右寄りなのが目立ってくるんです。私が持っている中では24インチのFHDが一番広いディスプレイなのですが、さらに大画面でQHDや4Kのディスプレイでは、より右寄りのずれが顕著になるであろうと思います。</p><p>それで、マージンをcalc()でうまくやって真ん中に来てくれるようにしました。私としてはスッキリしたと思うのですが、いかがでしょうか？</p><h3 id=共有ボタンのgをはてブに入れ替えた>共有ボタンのG+をはてブに入れ替えた</h3><figure class=article-image><a href=https://res.cloudinary.com/dj66cgnpk/image/upload/blog/%e3%82%b9%e3%82%af%e3%83%aa%e3%83%bc%e3%83%b3%e3%82%b7%e3%83%a7%e3%83%83%e3%83%88_2016-06-06_23-18-03.png><img src=https://res.cloudinary.com/dj66cgnpk/image/upload/t_blog_thumb/blog/%e3%82%b9%e3%82%af%e3%83%aa%e3%83%bc%e3%83%b3%e3%82%b7%e3%83%a7%e3%83%83%e3%83%88_2016-06-06_23-18-03.png alt></a><figcaption><p>はてブの共有ボタン</p></figcaption></figure><p>5月10日にやりました。ツイッターとフェイスブックは日常的に私が使っているので良いのですが、G+は手付かず。かといって、3つ並べることにしていたので補欠ポジション的にそこにありました。はてブが1軍入りしたきっかけは、<a href=/2016/02/impression-oss-gate/>OSS Gateの記事</a>を書いたら、どなたかがはてブでコメントをつけて下さっているのを発見したことでしたね。</p><p>根本的にボタンの数を3つに制限しているのがイマイチな気もしますし、さらに追加する際のデザインもなんとなく考えていますが、今のところ必要性を感じないのでそのままです。</p><h3 id=vivaldiのバナーを追加した>Vivaldiのバナーを追加した</h3><figure class=article-image><a href=https://res.cloudinary.com/dj66cgnpk/image/upload/blog/%e3%82%b9%e3%82%af%e3%83%aa%e3%83%bc%e3%83%b3%e3%82%b7%e3%83%a7%e3%83%83%e3%83%88_2016-06-06_23-04-07.png><img src=https://res.cloudinary.com/dj66cgnpk/image/upload/t_blog_thumb/blog/%e3%82%b9%e3%82%af%e3%83%aa%e3%83%bc%e3%83%b3%e3%82%b7%e3%83%a7%e3%83%83%e3%83%88_2016-06-06_23-04-07.png alt></a><figcaption><p>バナー追加前</p></figcaption></figure><figure class=article-image><a href=https://res.cloudinary.com/dj66cgnpk/image/upload/blog/%e3%82%b9%e3%82%af%e3%83%aa%e3%83%bc%e3%83%b3%e3%82%b7%e3%83%a7%e3%83%83%e3%83%88_2016-06-06_23-04-43.png><img src=https://res.cloudinary.com/dj66cgnpk/image/upload/t_blog_thumb/blog/%e3%82%b9%e3%82%af%e3%83%aa%e3%83%bc%e3%83%b3%e3%82%b7%e3%83%a7%e3%83%83%e3%83%88_2016-06-06_23-04-43.png alt></a><figcaption><p>バナー追加後</p></figcaption></figure><p>6月1日に入ってからやってました。</p><blockquote class=twitter-tweet><p lang=en dir=ltr>Help spread the word about Vivaldi by adding a button or banner to your website. Thanks for sharing!<a href=https://t.co/D6GgFny4fs>https://t.co/D6GgFny4fs</a></p>&mdash; Jon von Tetzchner (@jonsvt) <a href="https://twitter.com/jonsvt/status/734771593600225280?ref_src=twsrc%5Etfw">May 23, 2016</a></blockquote><p>たまたまツイートを見てみたら一番小さいバナーの幅が230pxで、左カラムの250pxにピッタリ。ただ、見出しと子要素の字下げのルールがバナーを入れると崩れてしまうので、字下げをせず揃えるように修正を入れました。今見たらバナーだけじゃなくてボタンも公開されてますね！</p><h3 id=cssのお掃除>CSSのお掃除</h3><p>これは6月3日です。急に思い立ったんだと思いますけど、idとクラスの入り混じったセレクタ祭りだったのを、ここで綺麗にしています。3つくらいセレクタくっつけてた状態から、最高でも1つだけになりました。パフォーマンス的には変わったんですかね？</p><h3 id=cssファイルを連結して出力するようにした>CSSファイルを連結して出力するようにした</h3><figure class=article-image><a href=https://res.cloudinary.com/dj66cgnpk/image/upload/blog/%e3%82%b9%e3%82%af%e3%83%aa%e3%83%bc%e3%83%b3%e3%82%b7%e3%83%a7%e3%83%83%e3%83%88_2016-06-06_23-58-31.png><img src=https://res.cloudinary.com/dj66cgnpk/image/upload/t_blog_thumb/blog/%e3%82%b9%e3%82%af%e3%83%aa%e3%83%bc%e3%83%b3%e3%82%b7%e3%83%a7%e3%83%83%e3%83%88_2016-06-06_23-58-31.png alt></a><figcaption><p>CSSファイル連結前</p></figcaption></figure><figure class=article-image><a href=https://res.cloudinary.com/dj66cgnpk/image/upload/blog/%e3%82%b9%e3%82%af%e3%83%aa%e3%83%bc%e3%83%b3%e3%82%b7%e3%83%a7%e3%83%83%e3%83%88_2016-06-06_23-59-19.png><img src=https://res.cloudinary.com/dj66cgnpk/image/upload/t_blog_thumb/blog/%e3%82%b9%e3%82%af%e3%83%aa%e3%83%bc%e3%83%b3%e3%82%b7%e3%83%a7%e3%83%83%e3%83%88_2016-06-06_23-59-19.png alt></a><figcaption><p>CSSファイル連結後</p></figcaption></figure><p>同日の6月3日。グーグル神がサイトの体験を評価してくれる<a href=https://developers.google.com/speed/pagespeed/insights/>PageSpeed Insights</a>は、私も気が向いたら試すようにしています。画像の最適化とかは去年やって、速度のスコアは79/100まではあげられたものの、もうちょっとスコア上げたいなあと思っていました。そしたら、</p><p><a href="http://blog2.jamadam.com?p=18">javascriptとcssを全自動で連結&圧縮する | jamadam weblog</a></p><p>という記事を見つけまして、「あー！linkのhrefにcgiを指定しても良かったのかー！」と思いまして、シェルでcssファイルをcatするだけのcgiを書きました。</p><pre><code>#!/bin/sh
echo 'Content-Type: text/css'
echo ''
cat normalize.css style.css
</code></pre><p>そしたら速度のスコアが90/100でオレンジから緑色になって、結構な効果ですよこれは。まあスコアが上がって満足したって話ですね。</p><p>ちなみにcssファイルの圧縮もしろと言われていますが、人間が読める状態にしておきたいので、それはパスです。</p><h3 id=バナーやアバターの画像をサーバ側にキャッシュするようにした>バナーやアバターの画像を、サーバ側にキャッシュするようにした</h3><p>翌日6月4日の昼。こっちはPageSpeed Insightsのスコアに影響を与えませんが、個人的に効果があるなあと思いました。前述のVivaldiのバナーはvivaldi.comから、<a href=/about>概要のページ</a>で表示しているアバターはgravater.comから持ってきています。なんかキャッシュ有効のはずなのに読みこんで時間が伸びている気が…ということなので、サーバ側で画像をwgetで持ってきて、それを表示させています。</p><p>wgetするタイミングは私が自作した<a href=https://github.com/knokmki612/sitesh>sitesh</a>の挙動で、記事を投稿したり更新すると専用のフォルダの中に置かれたスクリプトを実行するようになっており、そこでやってます。検索キャッシュの生成とか左カラムのラベルやアーカイブの更新のスクリプトも置いています。</p><p>なんか書きながら自分の言っていることに対して、セキュリティ的に不安になってきましたけど大丈夫だよね…？大丈夫だよね…？</p><p>と、半年のあいだ、他にも細かくいじっているのですが、我ながらよく続くなあという感じです。自分で全部作った愛着からなんでしょうか。これからも使いやすいサイトを目指していきたいと思います。</p></article></main><nav class=site-side-menu><div class=inner><section class="menu-section is-width-100pct"><h2>フィード</h2><a class=feed-button href=/blog/index.xml><img src=/rss.svg alt=フィード></a></section><section class="menu-section is-width-50pct"><h2><a href=/tags/>タグ</a></h2><ul><li><a href=https://kuno.kdns.info/tags/%E6%97%A5%E8%A8%98/>日記</a> (31)</li><li><a href=https://kuno.kdns.info/tags/oss-gate/>OSS Gate</a> (14)</li><li><a href=https://kuno.kdns.info/tags/%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC/>レビュー</a> (12)</li><li><a href=https://kuno.kdns.info/tags/%E3%82%AC%E3%82%B8%E3%82%A7%E3%83%83%E3%83%88/>ガジェット</a> (9)</li><li><a href=https://kuno.kdns.info/tags/sailfish-os/>Sailfish OS</a> (8)</li><li><a href=https://kuno.kdns.info/tags/tips/>Tips</a> (8)</li><li><a href=https://kuno.kdns.info/tags/jolla/>Jolla</a> (6)</li><li><a href=https://kuno.kdns.info/tags/%E3%81%8A%E7%9F%A5%E3%82%89%E3%81%9B/>お知らせ</a> (5)</li><li><a href=https://kuno.kdns.info/tags/%E6%98%A0%E7%94%BB/>映画</a> (3)</li><li><a href=https://kuno.kdns.info/tags/%E9%9B%91%E8%A8%98/>雑記</a> (3)</li><li><a href=https://kuno.kdns.info/tags/%E6%94%BE%E9%80%81%E5%A4%A7%E5%AD%A6/>放送大学</a> (2)</li><li><a href=https://kuno.kdns.info/tags/vim/>Vim</a> (1)</li><li><a href=https://kuno.kdns.info/tags/windows/>Windows</a> (1)</li><li><a href=https://kuno.kdns.info/tags/%E3%82%A8%E3%83%A2%E3%81%84/>エモい</a> (1)</li><li><a href=https://kuno.kdns.info/tags/%E6%9C%AC/>本</a> (1)</li></ul></section><section class="menu-section is-width-50pct"><h2><a href=/archives/>アーカイブ</a></h2><ul><li><a href=https://kuno.kdns.info/archives/2021-07/>2021-07</a> (1)</li><li><a href=https://kuno.kdns.info/archives/2021-06/>2021-06</a> (1)</li><li><a href=https://kuno.kdns.info/archives/2021/>2021</a> (2)</li><li><a href=https://kuno.kdns.info/archives/2020-06/>2020-06</a> (1)</li><li><a href=https://kuno.kdns.info/archives/2020/>2020</a> (1)</li><li><a href=https://kuno.kdns.info/archives/2019-06/>2019-06</a> (1)</li><li><a href=https://kuno.kdns.info/archives/2019-04/>2019-04</a> (1)</li><li><a href=https://kuno.kdns.info/archives/2019/>2019</a> (2)</li><li><a href=https://kuno.kdns.info/archives/2018-12/>2018-12</a> (1)</li><li><a href=https://kuno.kdns.info/archives/2018-11/>2018-11</a> (1)</li></ul></section></div></nav><footer class=site-footer><div class=inner><p>&copy; 2015 knokmki612</p></div></footer></body></html>